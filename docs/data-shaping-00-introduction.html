<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>MIDFIELD Institute - Shaping MIDFIELD data three ways</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data-shaping-01-data-selection.html" rel="next">
<link href="./data-basics.html" rel="prev">
<link href="./figures/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MIDFIELD Institute</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/MIDFIELDR/2024-midfield-institute"> <i class="bi bi-git" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-shaping-00-introduction.html">Shaping data 3 ways</a></li><li class="breadcrumb-item"><a href="./data-shaping-00-introduction.html">Introduction</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./before-you-arrive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Before you arrive</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./agenda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Program</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./tutorials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial links</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chart-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R chart basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R data basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://midfieldr.github.io/midfieldr/articles/art-001-case-goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case study goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://midfieldr.github.io/midfieldr/articles/art-002-case-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case study data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://midfieldr.github.io/midfieldr/articles/art-003-case-results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case study results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://midfieldr.github.io/midfieldr/articles/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Post-workshop tutorials</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Shaping data 3 ways</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-shaping-00-introduction.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-shaping-01-data-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data selection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-shaping-02-basic-transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic transforms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-shaping-03-aggregating-transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Aggregating transforms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-shaping-04-multi-table-transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multi-table transforms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-shaping-05-reshaping-transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reshaping transforms</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
<li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">Getting started</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#three-systems" id="toc-three-systems" class="nav-link" data-scroll-target="#three-systems">Three systems</a></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method">Method</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a></li>
  </ul><div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/MIDFIELDR/2024-midfield-institute/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-shaping-00-introduction.html">Shaping data 3 ways</a></li><li class="breadcrumb-item"><a href="./data-shaping-00-introduction.html">Introduction</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Shaping MIDFIELD data three ways</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="figures/data-shaping-0.png" class="img-fluid figure-img"></p>
<figcaption>Image: <em>Workshop</em> by Daniel Mee is licensed under <a href="https://creativecommons.org/licenses/by/2.0/">CC BY 2.0</a></figcaption></figure>
</div>
<p>Using <strong>base R</strong>, <strong>data.table</strong>, and <strong>dplyr/tidyr</strong> to transform MIDFIELD data as needed for your analysis.</p>
<p>In this series of articles, we hope to address the needs of users who would prefer to use base R or dplyr syntax in lieu of the data.table syntax that appears everywhere else in midfieldr tutorials. We illustrate common data shaping tasks three ways: using base R, data.table, and dplyr systems.</p>
<p>Sources for translating among the three systems include <span class="citation" data-cites="Atrebas:2019 Gimond:2019 Hajnala:2018 Mercer:2020 Vaughan:2023">(<a href="#ref-Atrebas:2019" role="doc-biblioref">atrebas, 2019</a>; <a href="#ref-Gimond:2019" role="doc-biblioref">Gimond, 2019</a>; <a href="#ref-Hajnala:2018" role="doc-biblioref">Hajnala, 2018</a>; <a href="#ref-Mercer:2020" role="doc-biblioref">Mercer, 2020</a>; and <a href="#ref-Vaughan:2023" role="doc-biblioref">Vaughan, 2023</a>)</span>. In particular, our outline is roughly based on Chapter 5 of <span class="citation" data-cites="Zumel+Mount:2020">(<a href="#ref-Zumel+Mount:2020" role="doc-biblioref">Zumel &amp; Mount, 2020</a>)</span>.</p>
<section id="getting-started" class="level2"><h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p><span class="important">Project organization.</span> If you are writing your own scripts to follow along, our tutorials assume that you:</p>
<ul>
<li>Are working within an <a href="before-you-arrive.html#start-the-setup">RStudio Project</a>
</li>
<li>Have set up a directory structure with folders for <a href="before-you-arrive.html#add-some-folders">data and scripts</a>.</li>
</ul>
<p><br></p>
<p><span class="important">Packages.</span> The table lists the packages used in the data shaping articles overall. You may wish to <a href="before-you-arrive.html#install-cran-packages">install</a> these packages before starting.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fsgwpjqqwo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fsgwpjqqwo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fsgwpjqqwo thead, #fsgwpjqqwo tbody, #fsgwpjqqwo tfoot, #fsgwpjqqwo tr, #fsgwpjqqwo td, #fsgwpjqqwo th {
  border-style: none;
}

#fsgwpjqqwo p {
  margin: 0;
  padding: 0;
}

#fsgwpjqqwo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #016763;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #016763;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fsgwpjqqwo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fsgwpjqqwo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fsgwpjqqwo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fsgwpjqqwo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fsgwpjqqwo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
}

#fsgwpjqqwo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fsgwpjqqwo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fsgwpjqqwo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fsgwpjqqwo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fsgwpjqqwo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fsgwpjqqwo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fsgwpjqqwo .gt_spanner_row {
  border-bottom-style: hidden;
}

#fsgwpjqqwo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fsgwpjqqwo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  vertical-align: middle;
}

#fsgwpjqqwo .gt_from_md > :first-child {
  margin-top: 0;
}

#fsgwpjqqwo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fsgwpjqqwo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #A5FEF2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #A5FEF2;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #A5FEF2;
  vertical-align: middle;
  overflow-x: hidden;
}

#fsgwpjqqwo .gt_stub {
  color: #FFFFFF;
  background-color: #01837B;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #01837B;
  padding-left: 5px;
  padding-right: 5px;
}

#fsgwpjqqwo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fsgwpjqqwo .gt_row_group_first td {
  border-top-width: 2px;
}

#fsgwpjqqwo .gt_row_group_first th {
  border-top-width: 2px;
}

#fsgwpjqqwo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fsgwpjqqwo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #01837B;
}

#fsgwpjqqwo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fsgwpjqqwo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
}

#fsgwpjqqwo .gt_grand_summary_row {
  color: #333333;
  background-color: #A5FEF2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fsgwpjqqwo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #01837B;
}

#fsgwpjqqwo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #01837B;
}

#fsgwpjqqwo .gt_striped {
  background-color: #F4F4F4;
}

#fsgwpjqqwo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
}

#fsgwpjqqwo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fsgwpjqqwo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fsgwpjqqwo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fsgwpjqqwo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fsgwpjqqwo .gt_left {
  text-align: left;
}

#fsgwpjqqwo .gt_center {
  text-align: center;
}

#fsgwpjqqwo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fsgwpjqqwo .gt_font_normal {
  font-weight: normal;
}

#fsgwpjqqwo .gt_font_bold {
  font-weight: bold;
}

#fsgwpjqqwo .gt_font_italic {
  font-style: italic;
}

#fsgwpjqqwo .gt_super {
  font-size: 65%;
}

#fsgwpjqqwo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fsgwpjqqwo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fsgwpjqqwo .gt_indent_1 {
  text-indent: 5px;
}

#fsgwpjqqwo .gt_indent_2 {
  text-indent: 10px;
}

#fsgwpjqqwo .gt_indent_3 {
  text-indent: 15px;
}

#fsgwpjqqwo .gt_indent_4 {
  text-indent: 20px;
}

#fsgwpjqqwo .gt_indent_5 {
  text-indent: 25px;
}

#fsgwpjqqwo .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fsgwpjqqwo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Table 1: Packages used for data shaping</caption>
<thead><tr class="header gt_col_headings">
<th id="packages" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">packages</th>
<th id="used for" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">used for</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="packages">midfielddata</td>
<td class="gt_row gt_left" headers="used for">student records practice data</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="packages">data.table</td>
<td class="gt_row gt_left gt_striped" headers="used for">manipulating data</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="packages">dplyr</td>
<td class="gt_row gt_left" headers="used for">manipulating data</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="packages">tidyr</td>
<td class="gt_row gt_left gt_striped" headers="used for">manipulating data</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="packages">wrapr</td>
<td class="gt_row gt_left" headers="used for">confirming two dataframes are equivalent</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="packages">cdata</td>
<td class="gt_row gt_left gt_striped" headers="used for">pivoting</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="packages">ggplot2</td>
<td class="gt_row gt_left" headers="used for">creating charts</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We load the packages used in an article as one of the first code chunks, as shown below. You can copy any code chunk by clicking on the “Copy to clipboard” icon <img src="figures/clipboard-icon.png" class="img-fluid">.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://midfieldr.github.io/midfielddata/">"midfielddata"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com">"data.table"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">"dplyr"</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/WinVector/wrapr">"wrapr"</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="important">Download and save CSV files.</span> In addition to the student record data in the midfielddata package, we have some prepared data to download from the Institute repository (an Internet connection is required). To download the CSV files and save to the <code>data</code> directory in your RStudio project folder, run the following lines <em>once.</em></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># three blocs of students: starters, ever-enrolled, and graduates</span></span>
<span><span class="va">data_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/MIDFIELDR/2024-midfield-institute/main/data/three_blocs.csv"</span></span>
<span><span class="va">three_blocs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread</a></span><span class="op">(</span><span class="va">data_url</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html">fwrite</a></span><span class="op">(</span><span class="va">three_blocs</span>, <span class="st">"data/three_blocs.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="data" class="level2"><h2 class="anchored" data-anchor-id="data">Data</h2>
<p><em>Import</em> the CSV file we just downloaded.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread</a></span><span class="op">(</span><span class="st">"data/three_blocs.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Load</em> the datasets from midfielddata. View data dictionaries via <code><a href="https://midfieldr.github.io/midfielddata/reference/student.html">?student</a></code> and <code><a href="https://midfieldr.github.io/midfielddata/reference/term.html">?term</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Have a quick look at each one using dplyr <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">cohort</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 12,970</span></span>
<span><span class="co">#&gt; Columns: 3</span></span>
<span><span class="co">#&gt; $ mcid       &lt;chr&gt; "MCID3111142965", "MCID3111145102", "MCID3111150194", "MCID…</span></span>
<span><span class="co">#&gt; $ program    &lt;chr&gt; "Electrical", "Electrical", "Industrial", "Electrical", "El…</span></span>
<span><span class="co">#&gt; $ peer_group &lt;chr&gt; "starters", "starters", "starters", "starters", "starters",…</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 97,555</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ mcid           &lt;chr&gt; "MCID3111142225", "MCID3111142283", "MCID3111142290", "…</span></span>
<span><span class="co">#&gt; $ institution    &lt;chr&gt; "Institution B", "Institution J", "Institution J", "Ins…</span></span>
<span><span class="co">#&gt; $ transfer       &lt;chr&gt; "First-Time Transfer", "First-Time Transfer", "First-Ti…</span></span>
<span><span class="co">#&gt; $ hours_transfer &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ race           &lt;chr&gt; "Asian", "Asian", "Asian", "Asian", "Asian", "Asian", "…</span></span>
<span><span class="co">#&gt; $ sex            &lt;chr&gt; "Male", "Female", "Male", "Male", "Male", "Male", "Male…</span></span>
<span><span class="co">#&gt; $ age_desc       &lt;chr&gt; "Under 25", "Under 25", "Under 25", "Under 25", "Under …</span></span>
<span><span class="co">#&gt; $ us_citizen     &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes",…</span></span>
<span><span class="co">#&gt; $ home_zip       &lt;chr&gt; NA, "22020", "23233", "20853", "22003", "23234", "24148…</span></span>
<span><span class="co">#&gt; $ high_school    &lt;chr&gt; NA, NA, "471872", NA, "470080", "471877", NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ sat_math       &lt;dbl&gt; NA, 560, 510, 640, 600, 570, 480, NA, NA, NA, 520, 430,…</span></span>
<span><span class="co">#&gt; $ sat_verbal     &lt;dbl&gt; NA, 230, 380, 460, 500, 530, 530, NA, NA, NA, 490, 490,…</span></span>
<span><span class="co">#&gt; $ act_comp       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 639,915</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ mcid                &lt;chr&gt; "MCID3111142225", "MCID3111142283", "MCID311114228…</span></span>
<span><span class="co">#&gt; $ institution         &lt;chr&gt; "Institution B", "Institution J", "Institution J",…</span></span>
<span><span class="co">#&gt; $ term                &lt;chr&gt; "19881", "19881", "19883", "19885", "19891", "1989…</span></span>
<span><span class="co">#&gt; $ cip6                &lt;chr&gt; "140901", "240102", "240102", "190601", "190601", …</span></span>
<span><span class="co">#&gt; $ level               &lt;chr&gt; "01 First-year", "01 First-year", "01 First-year",…</span></span>
<span><span class="co">#&gt; $ standing            &lt;chr&gt; "Good Standing", "Academic Probation", "Academic P…</span></span>
<span><span class="co">#&gt; $ coop                &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "N…</span></span>
<span><span class="co">#&gt; $ hours_term          &lt;dbl&gt; 7, 6, 12, 6, 6, 6, 6, 18, 15, 14, 13, 3, 13, 3, 3,…</span></span>
<span><span class="co">#&gt; $ hours_term_attempt  &lt;dbl&gt; 7, 6, 12, 6, 6, 6, 6, 18, 18, 14, 13, 3, 13, 3, 3,…</span></span>
<span><span class="co">#&gt; $ hours_cumul         &lt;dbl&gt; 7, 6, 18, 24, 30, 36, 42, 63, 78, 14, 27, 60, 82, …</span></span>
<span><span class="co">#&gt; $ hours_cumul_attempt &lt;dbl&gt; 7, 6, 18, 24, 30, 36, 42, 63, 81, 14, 27, 60, 82, …</span></span>
<span><span class="co">#&gt; $ gpa_term            &lt;dbl&gt; 2.56, 1.85, 1.93, 2.15, 1.85, 1.20, 1.85, 2.33, 2.…</span></span>
<span><span class="co">#&gt; $ gpa_cumul           &lt;dbl&gt; 2.56, 1.85, 1.90, 1.96, 1.94, 1.82, 1.82, 1.98, 2.…</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 49,665</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ mcid        &lt;chr&gt; "MCID3111142225", "MCID3111142290", "MCID3111142294", "MCI…</span></span>
<span><span class="co">#&gt; $ institution &lt;chr&gt; "Institution B", "Institution J", "Institution J", "Instit…</span></span>
<span><span class="co">#&gt; $ term_degree &lt;chr&gt; "19881", "19921", "19903", "19921", "19913", "19883", "199…</span></span>
<span><span class="co">#&gt; $ cip6        &lt;chr&gt; "141001", "141001", "141001", "141001", "090401", "141901"…</span></span>
<span><span class="co">#&gt; $ degree      &lt;chr&gt; "Bachelor of Science in Electrical Engineering", "Bachelor…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="three-systems" class="level2"><h2 class="anchored" data-anchor-id="three-systems">Three systems</h2>
<p>For every data frame we use, we construct a separate version for each system. For example, the three versions of the <code>student</code> table are prepared as shown below. Code chunks are color-coded by system.</p>
<div class="cell base">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># base R</span></span>
<span><span class="va">student_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell dtbl">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># data.table</span></span>
<span><span class="va">student_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell dplyr">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># dplyr</span></span>
<span><span class="va">student_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>The data frame names include a suffix to indicate the system as well.</p>
<div class="cell">
<div class="cell-output-display">
<div id="ujcxzvrmqp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ujcxzvrmqp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ujcxzvrmqp thead, #ujcxzvrmqp tbody, #ujcxzvrmqp tfoot, #ujcxzvrmqp tr, #ujcxzvrmqp td, #ujcxzvrmqp th {
  border-style: none;
}

#ujcxzvrmqp p {
  margin: 0;
  padding: 0;
}

#ujcxzvrmqp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #016763;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #016763;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ujcxzvrmqp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ujcxzvrmqp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ujcxzvrmqp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ujcxzvrmqp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ujcxzvrmqp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
}

#ujcxzvrmqp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ujcxzvrmqp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ujcxzvrmqp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ujcxzvrmqp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ujcxzvrmqp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ujcxzvrmqp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ujcxzvrmqp .gt_spanner_row {
  border-bottom-style: hidden;
}

#ujcxzvrmqp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ujcxzvrmqp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
  vertical-align: middle;
}

#ujcxzvrmqp .gt_from_md > :first-child {
  margin-top: 0;
}

#ujcxzvrmqp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ujcxzvrmqp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #A5FEF2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #A5FEF2;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #A5FEF2;
  vertical-align: middle;
  overflow-x: hidden;
}

#ujcxzvrmqp .gt_stub {
  color: #FFFFFF;
  background-color: #01837B;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #01837B;
  padding-left: 5px;
  padding-right: 5px;
}

#ujcxzvrmqp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ujcxzvrmqp .gt_row_group_first td {
  border-top-width: 2px;
}

#ujcxzvrmqp .gt_row_group_first th {
  border-top-width: 2px;
}

#ujcxzvrmqp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujcxzvrmqp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #01837B;
}

#ujcxzvrmqp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ujcxzvrmqp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
}

#ujcxzvrmqp .gt_grand_summary_row {
  color: #333333;
  background-color: #A5FEF2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujcxzvrmqp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #01837B;
}

#ujcxzvrmqp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #01837B;
}

#ujcxzvrmqp .gt_striped {
  background-color: #F4F4F4;
}

#ujcxzvrmqp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #01837B;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #01837B;
}

#ujcxzvrmqp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ujcxzvrmqp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujcxzvrmqp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ujcxzvrmqp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ujcxzvrmqp .gt_left {
  text-align: left;
}

#ujcxzvrmqp .gt_center {
  text-align: center;
}

#ujcxzvrmqp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ujcxzvrmqp .gt_font_normal {
  font-weight: normal;
}

#ujcxzvrmqp .gt_font_bold {
  font-weight: bold;
}

#ujcxzvrmqp .gt_font_italic {
  font-style: italic;
}

#ujcxzvrmqp .gt_super {
  font-size: 65%;
}

#ujcxzvrmqp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ujcxzvrmqp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ujcxzvrmqp .gt_indent_1 {
  text-indent: 5px;
}

#ujcxzvrmqp .gt_indent_2 {
  text-indent: 10px;
}

#ujcxzvrmqp .gt_indent_3 {
  text-indent: 15px;
}

#ujcxzvrmqp .gt_indent_4 {
  text-indent: 20px;
}

#ujcxzvrmqp .gt_indent_5 {
  text-indent: 25px;
}

#ujcxzvrmqp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ujcxzvrmqp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Table 2: Dataset naming convention</caption>
<thead><tr class="header gt_col_headings">
<th id="system" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">system</th>
<th id="suffix" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">suffix</th>
<th id="example" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">example</th>
<th id="class" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">class</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="system">base R</td>
<td class="gt_row gt_left" headers="suffix">_df</td>
<td class="gt_row gt_left" headers="example">student_df</td>
<td class="gt_row gt_left" headers="class">data.frame</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="system">data.table</td>
<td class="gt_row gt_left gt_striped" headers="suffix">_dt</td>
<td class="gt_row gt_left gt_striped" headers="example">student_dt</td>
<td class="gt_row gt_left gt_striped" headers="class">data.frame, data.table</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="system">dplyr</td>
<td class="gt_row gt_left" headers="suffix">_tbl</td>
<td class="gt_row gt_left" headers="example">student_tbl</td>
<td class="gt_row gt_left" headers="class">data.frame, tbl_df, tbl</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="method" class="level2"><h2 class="anchored" data-anchor-id="method">Method</h2>
<ol type="1">
<li><p>We want to make each operation as transparent as possible for the R novice. Hence we generally write a line of code to do one thing, avoiding combined or nested operations and introducing intermediate or temporary variables that get overwritten before reaching a desired result, e.g., <code>DF</code> for an intermediate data.frame, <code>DT</code> for an intermediate data.table, <code>vec</code> for an intermediate vector, etc.</p></li>
<li><p>In the same vein, we sometimes use intermediate variables for indexing, e.g.&nbsp;<code>rows_we_want</code>, <code>columns_we_want</code>, <code>order_index</code>, etc.</p></li>
<li><p>In general, we show only one approach per task per system, offering what we think is the best choice for our audience. In R there are usually multiple approaches for the same task and resources for exploring other methods are readily available.</p></li>
<li><p>We follow the convention of chaining dplyr steps with the magrittr pipe <code>%&gt;%</code> (though assigning temporary variables would work just as well). We do not generally use the piping or chaining operations available in base R and data.table.</p></li>
<li><p>In each example, results are manipulated such that base R, data.table, and dplyr yield the same form (usually a data frame) with the same variables and observations. In most cases, we compare data frame equivalence with <code><a href="https://winvector.github.io/wrapr//reference/check_equiv_frames.html">wrapr::check_equiv_frames()</a></code> which converts its arguments to data.frame class and reorders columns and rows.</p></li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://winvector.github.io/wrapr//reference/check_equiv_frames.html">check_equiv_frames</a></span><span class="op">(</span><span class="va">student_df</span>, <span class="va">student_dt</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://winvector.github.io/wrapr//reference/check_equiv_frames.html">check_equiv_frames</a></span><span class="op">(</span><span class="va">student_dt</span>, <span class="va">student_tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="6" type="1">
<li>In cases where re-ordering rows or columns is part of the task, we compare results by using base R <code><a href="https://rdrr.io/r/base/all.equal.html">all.equal()</a></code> instead of <code><a href="https://winvector.github.io/wrapr//reference/check_equiv_frames.html">check_equiv_frames()</a></code>. By setting the <code>check.attributes</code> argument to FALSE, data frame attributes (other than column names) are ignored, for example, row.names (if any) and class (e.g., <code>tbl</code> or <code>data.table</code>).</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">student_df</span>, <span class="va">student_dt</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">student_dt</span>, <span class="va">student_tbl</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="references" class="level2"><h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-Atrebas:2019" class="csl-entry" role="listitem">
atrebas. (2019). <em><span class="nocase">A data.table and dplyr tour</span></em>. <a href="https://atrebas.github.io/post/2019-03-03-datatable-dplyr/">https://atrebas.github.io/post/2019-03-03-datatable-dplyr/</a>
</div>
<div id="ref-Gimond:2019" class="csl-entry" role="listitem">
Gimond, M. (2019). <em><span class="nocase">base vs. tidyverse vs. data.table</span></em>. <a href="https://mgimond.github.io/rug_2019_12/Index.html">https://mgimond.github.io/rug_2019_12/Index.html</a>
</div>
<div id="ref-Hajnala:2018" class="csl-entry" role="listitem">
Hajnala, J. (2018). <em><span class="nocase">Data subsetting and manipulation with base R</span></em>. <a href="https://jozef.io/r002-data-manipulation/">https://jozef.io/r002-data-manipulation/</a>
</div>
<div id="ref-Mercer:2020" class="csl-entry" role="listitem">
Mercer, J. (2020). <em><span class="nocase">Base R, the tidyverse, and data.table: A comparison of R dialects to wrangle your data</span></em>. <a href="https://tinyurl.com/yy544udn">https://tinyurl.com/yy544udn</a>
</div>
<div id="ref-Vaughan:2023" class="csl-entry" role="listitem">
Vaughan, D. (2023). <em><span class="nocase">dplyr &lt;=&gt; base R</span></em>. <a href="https://dplyr.tidyverse.org/articles/base.html">https://dplyr.tidyverse.org/articles/base.html</a>
</div>
<div id="ref-Zumel+Mount:2020" class="csl-entry" role="listitem">
Zumel, N., &amp; Mount, J. (2020). <em><span class="nocase">Practical Data Science with R</span></em> (2nd ed.). Manning Publications Co.
</div>
</div>
</section><section id="appendix" class="level2"><h2 class="anchored" data-anchor-id="appendix">Appendix</h2>
<p>The R and package version numbers (as of this writing) are:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">R.version</span><span class="op">$</span><span class="va">version.string</span></span>
<span><span class="co">#&gt; [1] "R version 4.4.1 (2024-06-14 ucrt)"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"midfielddata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '0.2.1'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"data.table"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '1.15.4'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '1.1.4'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"tidyr"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '1.3.1'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"wrapr"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '2.1.0'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"cdata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '1.2.1'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '3.5.1'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://utteranc.es/client.js" repo="https://github.com/MIDFIELDR/2024-midfield-institute" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./data-basics.html" class="pagination-link" aria-label="R data basics">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">R data basics</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data-shaping-01-data-selection.html" class="pagination-link" aria-label="Data selection">
        <span class="nav-page-text">Data selection</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
    <a class="nav-link active" href="./license.html" aria-current="page">
<p>License</p>
</a>
  </li>  
</ul>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/MIDFIELDR/2024-midfield-institute/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>